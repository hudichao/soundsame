webpackJsonp([2,0],[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=o(40),a=n(s),i=o(110),u=n(i);new a["default"]({el:"body",components:{App:u["default"]}})},,,,,,,function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.initSongs=t.raiseSong=t.deleteSong=t.cutSong=t.addSong=t.getMusic=t.getMessage=void 0;var s=o(10),a=n(s),i=o(17),u=n(i);t.getMessage=function(e,t){var o=e.dispatch;e.state;o(u.GET_MESSAGE,t)},t.getMusic=function(e,t){var o=e.dispatch;e.state;console.log(u["REMOTE_"+t.type]),o(u["REMOTE_"+t.type],t.data)},t.addSong=function(e,t){e.dispatch,e.state;a.addSong(t)},t.cutSong=function(e){e.dispatch,e.state;a.cutSong()},t.deleteSong=function(e,t){e.dispatch,e.state;a.deleteSong(t)},t.raiseSong=function(e,t){e.dispatch,e.state;a.raiseSong(t)},t.initSongs=function(e,t){var o=e.dispatch,n=(e.state,2);a.initList(n).then(function(e){o(u.INIT_SONGS,e)})}},,,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveMessage=t.initList=t.deleteSong=t.raiseSong=t.cutSong=t.addSong=t.searchSong=t.url=t.wsUrl=void 0;var s=o(11),a=n(s),i=o(54),u=n(i),c=o(38),d=n(c),r=function(e){return new u["default"](function(t,o){d["default"].ajax(e).then(function(e){t(e)},function(e){o(e)})})},l=t.wsUrl="ws://120.55.93.6:3333",f=t.url="http://120.55.93.6:3333",p=new WebSocket(l);t.searchSong=function(e){return new u["default"](function(t,o){r({url:"http://115.29.195.14:8083/cmusic",data:{song_url:e},dataType:"json"}).then(function(e){var o=[];e.forEach(function(e){o.push({name:e.title,src:e.location,image:e.pic,song_id:e.song_id})}),t(o)})})},t.addSong=function(e){return r({url:f+"/api/addSong",data:{song_id:e.song_id,name:e.name,src:e.src,image:e.image}})},t.cutSong=function(){return r({url:f+"/api/cutSong"})},t.raiseSong=function(e){return r({url:f+"/api/raiseSong",data:{id:e}})},t.deleteSong=function(e){return r({url:f+"/api/removeSong",data:{id:e}})},t.initList=function(e){return r({url:f+"/api/initList",data:{room_id:e},dataType:"json"})},t.saveMessage=function(e){p.send((0,a["default"])({type:"CHAT",data:e}))}},,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.music=function(e){return e.music.music},t.messages=function(e){return e.message.messages},t.songs=function(e){return e.music.songs},t.activeSong=function(e){return e.music.activeSong},t.oldSongs=function(e){return e.music.oldSongs}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_MESSAGE="获取文本信息",t.REMOTE_ADD_ACTIVE_SONG="歌曲加入当前播放",t.REMOTE_ADD_SONG="歌曲加入歌单",t.REMOTE_CUT_SONG="切歌",t.REMOTE_DELETE_SONG="删歌",t.REMOTE_RAISE_SONG="顶歌",t.INIT_SONGS="初始化歌曲列表"},,,,,,,,,,,,,,,,,,,,,,function(e,t,o){var n,s;o(96),n=o(49),s=o(106),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(26),a=n(s),i=o(11),u=n(i),c=o(17),d={messages:[]},r=(0,a["default"])({},c.GET_MESSAGE,function(e,t){e.messages.push(t),console.log((0,u["default"])(e.messages))});t["default"]={state:d,mutations:r}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(26),i=n(a),u=o(11),c=n(u),d=o(17),r=o(100),l=n(r),f={songs:[],oldSongs:[],activeSong:{name:"",src:"",song_id:"",id:""}},p=(s={},(0,i["default"])(s,d.REMOTE_ADD_ACTIVE_SONG,function(e,t){e.activeSong=t}),(0,i["default"])(s,d.REMOTE_ADD_SONG,function(e,t){e.songs.push(t)}),(0,i["default"])(s,d.REMOTE_CUT_SONG,function(e,t){e.activeSong&&e.oldSongs.push(e.activeSong),t.id?(e.activeSong=t,p[d.REMOTE_DELETE_SONG](e,t.id)):(e.activeSong={},console.log("no song in queue"))}),(0,i["default"])(s,d.REMOTE_DELETE_SONG,function(e,t){var o=l["default"].findIndex(e.songs,{id:t});o>-1&&e.songs.splice(o,1)}),(0,i["default"])(s,d.REMOTE_RAISE_SONG,function(e,t){var o=l["default"].findIndex(JSON.parse((0,c["default"])(e.songs)),{id:t});if(o>-1){var n=e.songs.splice(o,1)[0];e.songs.unshift(n)}}),(0,i["default"])(s,d.INIT_SONGS,function(e,t){console.log("init songs"),e.songs=t.songs||[],e.oldSongs=t.oldSongs||[],e.activeSong=t.activeSong||{}}),s);t["default"]={state:f,mutations:p}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(40),a=n(s),i=o(118),u=n(i),c=o(41),d=n(c),r=o(42),l=n(r),f=o(119),p=n(f);a["default"].use(u["default"]);var g=!1;t["default"]=new u["default"].Store({modules:{message:d["default"],music:l["default"]},strict:!0,middlewares:g?[(0,p["default"])()]:[]})},function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(43),i=s(a),u=o(113),c=s(u),d=o(112),r=s(d),l=o(111),f=s(l),p=o(10),g=n(p);t["default"]={data:function(){return{ws:new window.WebSocket(g.wsUrl)}},store:i["default"],created:function(){var e=this,t=function(e){},o=function(t){console.log(t.data),e.$broadcast("wsmessage",JSON.parse(t.data))},n=function(e){console.log("server was closed")};this.ws.onopen=t,this.ws.onmessage=o,this.ws.onclose=n,setTimeout(function(){WB2.anyWhere(function(e){e.widget.connectButton({id:"wb_connect_btn",type:"1,2",callback:{login:function(e){console.log(e)},logout:function(e){}}})})},300)},components:{musicArea:c["default"],messageArea:r["default"],listArea:f["default"]}}},function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(11),i=s(a),u=o(10),c=n(u),d=o(7),r=o(16),l=o(115),f=s(l),p=o(116),g=s(p);t["default"]={data:function(){return{input:"",searchResult:{data:[],isLoading:!1},showOldSongs:!1,showHistoryModal:!1,showSearchModal:!1}},methods:{doSearch:function(){var e=this;this.input&&(this.showSearchModal=!0,this.searchResult={data:[],isLoading:!0},c.searchSong(this.input).then(function(t){var o=t?t.slice(0,5):[];e.searchResult={data:o,isLoading:!1}}))},add:function(e){this.addSong(e)},raise:function(e){this.raiseSong(e.id)},remove:function(e){this.deleteSong(e.id)},cut:function(){this.currentTime=0,this.cutSong()},viewHistory:function(){this.showHistoryModal=!0}},events:{wsmessage:function(e){console.log("获取"+(0,i["default"])(e)+"!!!!");var t=["ADD_SONG","CUT_SONG","RAISE_SONG","DELETE_SONG","ADD_ACTIVE_SONG"];t.indexOf(e.type)>-1&&this.getMusic(e)}},ready:function(){this.initSongs()},components:{OldsongModal:f["default"],SearchsongModal:g["default"]},vuex:{getters:{songs:r.songs,activeSong:r.activeSong,oldSongs:r.oldSongs},actions:{addSong:d.addSong,deleteSong:d.deleteSong,raiseSong:d.raiseSong,initSongs:d.initSongs,getMusic:d.getMusic,cutSong:d.cutSong}}}},function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var s=o(7),a=o(16),i=o(10),u=n(i);t["default"]={data:function(){return{message:{name:"",body:"",time:null}}},methods:{send:function(){this.message.time=new Date,u.saveMessage(this.message),this.message.body=""}},events:{wsmessage:function(e){"CHAT"===e.type&&(console.log(e),this.getMessage(e.data))}},vuex:{getters:{messages:a.messages},actions:{getMessage:s.getMessage}},ready:function(){}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(117),a=n(s),i=o(16),u=o(7);t["default"]={components:{sound:a["default"]},data:function(){return{currentTime:0}},methods:{cut:function(){console.log("cut!"),this.currentTime=0,this.cutSong()}},ready:function(){},vuex:{actions:{cutSong:u.cutSong},getters:{activeSong:i.activeSong}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{size:{type:Number,"default":16}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(38),a=n(s),i=o(114),u=n(i);t["default"]={props:{show:{type:Boolean,required:!0,twoWay:!0},onClose:{type:Function,required:!0},backdrop:{type:Boolean,"default":!1}},methods:{close:function(){this.onClose()},bindFunc:function(e){var t=this;t.show&&27===e.keyCode&&t.onClose()},stopPropagation:function(e){e.stopPropagation()}},data:function(){return{cssDom:null}},watch:{show:function(e){var t=this;try{e?(this.cssDom.appendTo("head"),document.querySelector("html").classList.add("modal-opened")):setTimeout(function(){document.querySelector("html").classList.remove("modal-opened"),t.cssDom.remove()},200)}catch(o){console.error(o)}}},ready:function(){var e=(0,a["default"])(window).width();document.querySelector("html").classList.add("modal-opened");var t=(0,a["default"])(window).width();document.querySelector("html").classList.remove("modal-opened"),this.cssDom=(0,a["default"])("<style type='text/css'>.modal-opened{margin-right:"+(t-e)+"px}</style>"),document.addEventListener("keydown",this.bindFunc)},beforeDestroy:function(){document.removeEventListener("keydown",this.bindFunc)},components:{Close:u["default"]}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(39),a=n(s),i=o(7);t["default"]={props:{data:{type:Array},show:{type:Boolean,twoWay:!0,required:!0}},components:{Modal:a["default"]},methods:{close:function(){this.show=!1},add:function(e){this.addSong(e),this.close()}},vuex:{actions:{addSong:i.addSong}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(39),a=n(s),i=o(7);t["default"]={props:{data:{type:Object},show:{type:Boolean,twoWay:!0,required:!0}},components:{Modal:a["default"]},methods:{close:function(){this.show=!1},add:function(e){this.addSong(e),this.close()}},vuex:{actions:{addSong:i.addSong}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{activeSong:{type:Object}},data:function(){return{audio:null}},ready:function(){var e=this;this.audio=this.$el,this.audio.onended=function(){console.log("歌曲自然结束"),e.$dispatch("song-end")}},watch:{activeSong:function(e){e&&(this.audio.pause(),e.src&&(this.audio.src=e.src,e.startTime&&(this.audio.currentTime=(Date.now()-e.startTime)/1e3),this.audio.play()))}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t){e.exports=" <div id=app> <music-area></music-area> <list-area></list-area> <message-area></message-area> <button id=wb_connect_btn></button> </div> "},function(e,t){e.exports=' <div class=listArea> <oldsong-modal :show.sync=showHistoryModal :data=oldSongs></oldsong-modal> <searchsong-modal :show.sync=showSearchModal :data=searchResult></searchsong-modal> <div class=wrapper> <div class=search> <form> <input type=text v-model=input> <span class=btns> <button type=submit @click.prevent=doSearch()>搜索歌曲</button> <button @click.prevent=viewHistory()>歌曲历史</button> </span> </form> </div> <div class=songList> <span class=one-song v-if=activeSong.name>正在播放~~~~~{{activeSong.name}} <span class=btn> <button class=musicAction @click=cut(song)>切</button> </span> </span> <span class=one-song v-for="song in songs" track-by=id>{{song.name}} <span class=btns> <button class=musicAction @click=raise(song)>顶</button> <button class=musicAction @click=remove(song)>删</button> </span> </span> </div> </div> </div> '},function(e,t){e.exports=' <div class=messageArea> <ul> <li v-for="one in messages" track-by=$index> <span class=name>{{one.name}}</span> <span class=body>{{one.body}}</span> </li> </ul> <div class=inputArea> <form> <input type=text v-model=message.body> <button type=submit @click.prevent=send()>发送</button> </form> </div> </div> '},function(e,t){e.exports=" <div class=songArea> <sound :active-song=activeSong v-on:song-end=cut></sound> </div> "},function(e,t){e.exports=' <div class=the-close> <div class="line line-1"></div> <div class="line line-2"></div> </div> '},function(e,t){e.exports=' <div class="modal modal-2016-8" transition v-if=show @click="backdrop ? close() : \'\'"> <div class=modal-content @click=stopPropagation($event)> <div class=modal-header> <slot name=header></slot> <div class=modal-close @click.prevent=close()> <close></close> </div> </div> <div class=modal-body-wrapper> <div class=modal-body> <slot name=body></slot> </div> </div> <div class=modal-footer> <slot name=footer></slot> </div> </div> </div> '},function(e,t){e.exports=" <audio controls> <source type=audio/mpeg> </audio> "},function(e,t){e.exports=' <modal :show.sync=show :on-close=close _v-0dc08a01=""> <div slot=header _v-0dc08a01="">搜索</div> <div slot=body _v-0dc08a01=""> <div class=searchResult _v-0dc08a01=""> <div v-if="data.data.length > 0" _v-0dc08a01=""> <span class=one-song v-for="one in data.data" track-by=song_id _v-0dc08a01=""> {{one.name}} <span class=btn _v-0dc08a01=""><button @click=add(one) _v-0dc08a01="">加入歌单</button></span> </span> </div> <div v-if="data.data.length === 0 &amp;&amp; data.isLoading === false" _v-0dc08a01=""> <span class=notFound _v-0dc08a01="">没有找到歌曲！</span> </div> <div v-if="data.isLoading === true" _v-0dc08a01=""> <span class=searching _v-0dc08a01="">搜索中...</span> </div> </div> </div> </modal> '},function(e,t){e.exports=' <modal :show.sync=show :on-close=close _v-18425c84=""> <div slot=header _v-18425c84="">歌曲历史</div> <div slot=body _v-18425c84=""> <div class=songList _v-18425c84=""> <span class=one-song v-for="song in data" track-by=$index _v-18425c84="">{{song.name}} <span class=btn _v-18425c84=""><button @click=add(song) _v-18425c84="">加入歌单</button></span> </span> </div> </div> </modal> '},function(e,t,o){var n,s;o(91),n=o(44),s=o(101),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(92),n=o(45),s=o(102),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(93),n=o(46),s=o(103),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(94),n=o(47),s=o(104),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(95),n=o(48),s=o(105),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(99),n=o(50),s=o(109),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(98),n=o(51),s=o(108),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},function(e,t,o){var n,s;o(97),n=o(52),s=o(107),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)}]);
//# sourceMappingURL=app.500543f6e1a69fb508e1.js.map